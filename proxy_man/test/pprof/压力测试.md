# 1. 监控内存 (Heap)
go tool pprof -http=:8081 http://localhost:6060/debug/pprof/heap

# 2. 监控 CPU
采集30s的cpu数据
go tool pprof -http=:8083 "http://localhost:6060/debug/pprof/profile?seconds=30"

# ab压力测试
# -k: Keep-Alive
# -n: 总请求数 (bench.go 里是 1000/2000/5000)
# -c: 并发数 (bench.go 里是 10/50/100)
# -p: 指定 POST 的文件 (使用 generate.go 生成的真实随机文件)
# -T: Content-Type
# 最后的 URL: 这里的 8080 是您的代理端口，如果您想直连后端压测，改成 9001
# http
ab -k -n 10 -c 10 -X 127.0.0.1:8080 -p test/data/huge_100m.bin -T application/octet-stream http://127.0.0.1:9001/test/upload

ab -k -n 100 -c 50 -X 127.0.0.1:8080 -p test/data/huge_5m.bin -T application/octet-stream http://127.0.0.1:9001/test/upload

ab -k -n 20 -c 10 -X 127.0.0.1:8080 -p test/data/large_1m.bin -T application/octet-stream http://127.0.0.1:9001/test/upload

ab -k -n 20 -c 10 -X 127.0.0.1:8080 -p test/data/medium_100k.bin -T application/octet-stream http://127.0.0.1:9001/test/upload

ab -k -n 20 -c 10 -X 127.0.0.1:8080 -p test/data/small_1k.bin -T application/octet-stream http://127.0.0.1:9001/test/upload

# https
ab -k -n 100 -c 50 -X 127.0.0.1:8080 -p test/data/huge_5m.bin -T application/octet-stream https://127.0.0.1:9001/test/upload



ab -k -n 20 -c 10 -X 127.0.0.1:8080 "http://localhost:9001/test/download?file=large_1m.bin"